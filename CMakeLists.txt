PROJECT(Poisson)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

# To allow standalone compilation out of the main tree
IF(NOT IFEM_CONFIGURED)
  FIND_PACKAGE(IFEM REQUIRED)
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${IFEM_CXX_FLAGS}")
ENDIF(NOT IFEM_CONFIGURED)

FILE(GLOB Poisson_SRCS *.C)
FILE(GLOB Poisson_HDRS *.h;CMakeLists.txt)
FILE(GLOB Poisson_TSTS Test/*.xinp;Test/*.g2)

INCLUDE_DIRECTORIES(${IFEM_INCLUDES})

SET(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)

ADD_EXECUTABLE(Poisson ${Poisson_SRCS})
TARGET_LINK_LIBRARIES(Poisson IFEM ${IFEM_LIBRARIES})

# Installation
INSTALL(TARGETS Poisson DESTINATION bin COMPONENT bin)
INSTALL(FILES ${El_SRCS} DESTINATION ${CMAKE_INSTALL_DOCDIR}/Apps/Elasticity COMPONENT examples)
INSTALL(FILES ${LinEl_INST} DESTINATION ${CMAKE_INSTALL_DOCDIR}/Apps/Elasticity/Linear COMPONENT examples)
INSTALL(FILES ${LinEl_TSTS} DESTINATION ${CMAKE_INSTALL_DOCDIR}/Apps/Elasticity/Linear/Test COMPONENT examples)
